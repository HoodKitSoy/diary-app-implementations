# **バリデーション定義書 \- My Diary App**

## **1\. 概要**

本ドキュメントは、APIリクエストで受け取るデータに対するバリデーションルールを定義します。

## **2\. 認証関連**

### **2.1. 新規ユーザー登録 (POST /auth/register)**

| フィールド | 必須/任意 | 型 | ルール | エラーメッセージ例 |
| :---- | :---- | :---- | :---- | :---- |
| username | 必須 | String | 1〜50文字 | 「ユーザー名は1文字以上50文字以内で入力してください。」 |
| email | 必須 | String | 有効なメールアドレス形式, 一意であること | 「有効なメールアドレスを入力してください。」 |
| password | 必須 | String | 8文字以上, 英数字混合 | 「パスワードは8文字以上の英数字で設定してください。」 |

### **2.2. ログイン (POST /auth/login)**

| フィールド | 必須/任意 | 型 | ルール | エラーメッセージ例 |
| :---- | :---- | :---- | :---- | :---- |
| email | 必須 | String | 有効なメールアドレス形式 | 「メールアドレスまたはパスワードが正しくありません。」 |
| password | 必須 | String | \- | 「メールアドレスまたはパスワードが正しくありません。」 |

## **3\. 日記関連**

### **3.1. 日記作成・更新 (POST /diaries, PUT /diaries/{id})**

| フィールド | 必須/任意 | 型 | ルール | エラーメッセージ例 |
| :---- | :---- | :---- | :---- | :---- |
| title | 必須 | String | 1〜255文字 | 「タイトルは1文字以上255文字以内で入力してください。」 |
| content | 任意 | String | 最大65,535文字 | 「本文は65,535文字以内で入力してください。」 |
| emotion | 任意 | String | 事前定義されたリストに含まれること | 「無効な感情アイコンです。」 |
| tags | 任意 | Array | 配列であること。各要素は1〜50文字の文字列。 | 「タグの形式が正しくありません。」 |
| images | 任意 | Array | 配列であること。各要素はオブジェクト。 | 「画像の形式が正しくありません。」 |
| images\[\].filename | 必須(images内) | String | 1〜255文字 | 「ファイル名が必要です。」 |
| images\[\].data | 必須(images内) | String | 有効なBase64形式のデータURL | 「画像データが不正です。」 |

## **4\. 設定関連**

### **4.1. 設定更新 (PUT /settings)**

| フィールド | 必須/任意 | 型 | ルール | エラーメッセージ例 |
| :---- | :---- | :---- | :---- | :---- |
| theme | 任意 | String | 'light' または 'dark' のみ | 「テーマの値が不正です。」 |
| reminder\_time | 任意 | String | HH:MM 形式 または null | 「リマインダー時刻の形式が正しくありません。」 |

